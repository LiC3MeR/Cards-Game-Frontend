<template>
  <div class="container mx-auto p-8">
    <h1 class="text-3xl font-bold mb-6">üñºÔ∏è –¢–µ—Å—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</h1>

    <div class="space-y-4">
      <!-- –¢–µ—Å—Ç –ø—Ä—è–º–æ–≥–æ URL -->
      <div class="glass-effect rounded-xl p-4">
        <h2 class="font-bold mb-2">–¢–µ—Å—Ç 1: –ü—Ä—è–º–æ–π URL</h2>
        <img 
          src="/images/cards/–¥–∂–µ–∫-—Ñ–æ–Ω–∞—Ä—å_1761048659643.jpg"
          alt="Test"
          class="w-32 h-48 object-cover rounded"
          @load="() => console.log('‚úÖ Image 1 loaded')"
          @error="(e) => console.error('‚ùå Image 1 failed', e)"
        />
        <p class="text-sm mt-2">/images/cards/–¥–∂–µ–∫-—Ñ–æ–Ω–∞—Ä—å_1761048659643.jpg</p>
      </div>

      <!-- –¢–µ—Å—Ç –∫–∞—Ä—Ç –∏–∑ API -->
      <div class="glass-effect rounded-xl p-4">
        <h2 class="font-bold mb-2">–¢–µ—Å—Ç 2: –ö–∞—Ä—Ç—ã –∏–∑ API</h2>
        <button @click="loadCards" class="btn-primary mb-4">–ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞—Ä—Ç—ã</button>
        
        <div v-if="cards.length > 0" class="grid grid-cols-4 gap-4">
          <div v-for="card in cards.slice(0, 8)" :key="card.id" class="border rounded p-2">
            <img 
              :src="card.imageUrl"
              :alt="card.name"
              class="w-full h-32 object-cover rounded mb-2"
              @load="() => console.log('‚úÖ Loaded:', card.imageUrl)"
              @error="(e) => { console.error('‚ùå Failed:', card.imageUrl); e.target.src = '' }"
            />
            <p class="text-xs truncate">{{ card.name }}</p>
            <p class="text-xs text-gray-400 truncate">{{ card.imageUrl }}</p>
          </div>
        </div>
      </div>

      <!-- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ -->
      <div class="glass-effect rounded-xl p-4">
        <h2 class="font-bold mb-2">–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ–∞–π–ª—ã:</h2>
        <div class="text-xs text-gray-300 space-y-1">
          <div>/images/cards/–¥–∂–µ–∫-—Ñ–æ–Ω–∞—Ä—å_1761048659643.jpg</div>
          <div>/images/cards/–∑–ª–æ–≤–µ—â–∞—è_—Ç—ã–∫–≤–∞_1761048564066.jpg</div>
          <div>/images/cards/–∏—Å–ø—É–≥–∞–Ω–Ω—ã–π_–ø—Ä–∏–∑—Ä–∞–∫_1761048466810.jpg</div>
          <div>/images/packs/–º–µ—à–æ–∫_—Å–ª–∞–¥–æ—Å—Ç–µ–π_1761048840715.jpg</div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
const cards = ref([])

const loadCards = async () => {
  const config = useRuntimeConfig()
  const data = await $fetch(`${config.public.apiBase}/cards`)
  cards.value = data
  console.log('Cards loaded:', data.length)
  console.log('First card imageUrl:', data[0]?.imageUrl)
}
</script>

